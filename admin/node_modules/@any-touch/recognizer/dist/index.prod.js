"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib=require("tslib"),shared=require("@any-touch/shared");function resetStatus(e){-1!==[shared.STATUS_END,shared.STATUS_CANCELLED,shared.STATUS_RECOGNIZED,shared.STATUS_FAILED].indexOf(e.status)&&(e.status=shared.STATUS_POSSIBLE)}function flow(e,s,r){var t,a,T,i,o,S,d,h={1:(t={},t[shared.STATUS_POSSIBLE]=(a={},a[shared.INPUT_MOVE]=shared.STATUS_START,a),t[shared.STATUS_START]=(T={},T[shared.INPUT_MOVE]=shared.STATUS_MOVE,T[shared.INPUT_END]=shared.STATUS_END,T[shared.INPUT_CANCEL]=shared.STATUS_CANCELLED,T),t[shared.STATUS_MOVE]=(i={},i[shared.INPUT_MOVE]=shared.STATUS_MOVE,i[shared.INPUT_END]=shared.STATUS_END,i[shared.INPUT_CANCEL]=shared.STATUS_CANCELLED,i),t),0:(o={},o[shared.STATUS_START]=(S={},S[shared.INPUT_MOVE]=shared.STATUS_CANCELLED,S[shared.INPUT_END]=shared.STATUS_END,S[shared.INPUT_CANCEL]=shared.STATUS_CANCELLED,S),o[shared.STATUS_MOVE]=(d={},d[shared.INPUT_START]=shared.STATUS_FAILED,d[shared.INPUT_MOVE]=shared.STATUS_CANCELLED,d[shared.INPUT_END]=shared.STATUS_END,d[shared.INPUT_CANCEL]=shared.STATUS_CANCELLED,d),o)};return void 0!==h[Number(e)][s]&&h[Number(e)][s][r]||s}function recognizeForPressMoveLike(e,s,r){var t=e.test(s);resetStatus(e);var a=s.inputType;e.status=flow(t,e.status,a);var T=e.computed;e.isRecognized=[shared.STATUS_START,shared.STATUS_MOVE].includes(e.status);var i=e.name,o=e.status,S=e.isRecognized;return S&&r(i,T),(S||[shared.STATUS_END,shared.STATUS_CANCELLED].includes(e.status))&&r(i+o,T),t}var default_1=function(){function e(e){this.disabled=!1,this.status=shared.STATUS_POSSIBLE,this.isRecognized=!1,this.recognizerMap={},this.computedGroup={},this.computed={},this.computeFunctionMap={},this.options=e,this.name=this.options.name}return e.prototype.set=function(e){return void 0!==e&&(this.options=tslib.__assign(tslib.__assign({},this.options),e)),this},e.prototype.isValidPointLength=function(e){return 0===this.options.pointLength||this.options.pointLength===e},e.prototype.compute=function(e,s){var r,t,a=Object.create(null);try{for(var T=tslib.__values(e),i=T.next();!i.done;i=T.next()){var o=i.value,S=o._id,d=this.computedGroup,h=this.computeFunctionMap;for(var n in void 0===h[S]&&(h[S]=o()),d[S]=d[S]||h[S](s),d[S])a[n]=d[S][n]}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=T.return)&&t.call(T)}finally{if(r)throw r.error}}return a},e}();exports.default=default_1,exports.recognizeForPressMoveLike=recognizeForPressMoveLike,exports.resetStatusForPressMoveLike=resetStatus;
