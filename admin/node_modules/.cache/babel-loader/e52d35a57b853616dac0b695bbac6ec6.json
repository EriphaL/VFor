{"remainingRequest":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js!/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eripha/Desktop/project/routine/admin/src/views/AdminUserList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eripha/Desktop/project/routine/admin/src/views/AdminUserList.vue","mtime":1593006952780},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpdGVtczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+mHjeaWsOiwg+eUqAogICAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGZldGNoJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuJGh0dHAuZ2V0KCcvcmVzdC9hZG1pbl91c2VycycpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSByZXMuZGF0YTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUocm93KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJlbW92ZSQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgiXHU2NjJGXHU1NDI2XHU4OTgxXHU1MjIwXHU5NjY0XHU3QkExXHU3NDA2XHU1NDU4XHVGRjFBIi5jb25jYXQocm93LnVzZXJuYW1lKSwgJ+aPkOekuicsIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgICAgdmFyIHJlczsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChfdGhpcy4kaHR0cC5kZWxldGUoIi9yZXN0L2FkbWluX3VzZXJzLyIuY29uY2F0KHJvdy5faWQpKSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXRlbXMgPSByZXMuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmV0Y2goKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaCgpOwogIH0KfTs="},{"version":3,"sources":["AdminUserList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,KAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAGA,KAAA,KAAA,CAAA,GAAA,CAAA,mBAAA,CAHA;;AAAA;AAGA,cAAA,GAHA;AAIA,mBAAA,KAAA,GAAA,GAAA,CAAA,IAAA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,IAAA,MANA,kBAMA,GANA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAOA,mBAAA,QAAA,iEAAA,GAAA,CAAA,QAAA,GAAA,IAAA,EAAA;AACA,gBAAA,iBAAA,EAAA,IADA;AAEA,gBAAA,gBAAA,EAAA,IAFA;AAGA,gBAAA,IAAA,EAAA;AAHA,eAAA,EAIA,IAJA,CAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAEA,KAAA,CAAA,KAAA,CAAA,MAAA,6BAAA,GAAA,CAAA,GAAA,EAFA;;AAAA;AAEA,wBAAA,GAFA;AAGA,wBAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA;;AACA,wBAAA,KAAA,CAAA,QAAA,CAAA;AACA,0BAAA,IAAA,EAAA,SADA;AAEA,0BAAA,OAAA,EAAA;AAFA,yBAAA;;AAIA,wBAAA,KAAA,CAAA,KAAA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GANA;AA6BA,EAAA,OA7BA,qBA6BA;AACA,SAAA,KAAA;AACA;AA/BA,CAAA","sourcesContent":["<template>\n  <div>\n    <h1>管理员列表</h1>\n    <el-table :data=\"items\">\n      <el-table-column prop=\"_id\" label=\"ID\" width=\"230\"></el-table-column>\n      <!-- 后端接口添加了populate方法，把parent变成了一个对象，以此来获取它的name。否则prop=parent只能拿到它的id -->\n\n      <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <!-- scope表示当前行 -->\n          <el-button\n            @click=\"$router.push(`/admin_users/edit/${scope.row._id}`)\"\n            type=\"text\"\n            size=\"small\"\n          >编辑</el-button>\n          <el-button @click=\"remove(scope.row)\" type=\"text\" size=\"small\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      items: []\n    }\n  },\n  methods: {\n    //重新调用\n    async fetch () {\n      const res = await this.$http.get('/rest/admin_users')\n      this.items = res.data\n    },\n    async remove (row) {\n      this.$confirm(`是否要删除管理员：${row.username}`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        //注意这边是row_id\n        const res = await this.$http.delete(`/rest/admin_users/${row._id}`)\n        this.items = res.data\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n        this.fetch()\n      });\n    }\n  },\n  created () {\n    this.fetch()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>"],"sourceRoot":"src/views"}]}