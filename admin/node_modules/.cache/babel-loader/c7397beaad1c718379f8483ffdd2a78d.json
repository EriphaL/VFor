{"remainingRequest":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js!/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eripha/Desktop/project/routine/admin/src/components/BarChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eripha/Desktop/project/routine/admin/src/components/BarChart.vue","mtime":1593395785985},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgc2NhbGVMaW5lYXIsIHNjYWxlQmFuZCB9IGZyb20gImQzLXNjYWxlIjsKaW1wb3J0IHsgbWF4LCBtaW4gfSBmcm9tICJkMy1hcnJheSI7CmltcG9ydCB7IHNlbGVjdEFsbCB9IGZyb20gImQzLXNlbGVjdGlvbiI7IC8vIGltcG9ydCB7IHRyYW5zaXRpb24gfSBmcm9tICJkMy10cmFuc2l0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQmFyQ2hhcnQiLAogIHByb3BzOiB7CiAgICB0aXRsZTogU3RyaW5nLAogICAgeEtleTogU3RyaW5nLAogICAgeUtleTogU3RyaW5nLAogICAgZGF0YTogQXJyYXkKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnN2Z1dpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRhaW5lciIpLm9mZnNldFdpZHRoICogMC43NTsKICAgIHRoaXMuQWRkUmVzaXplTGlzdGVuZXIoKTsKICAgIHRoaXMuQW5pbWF0ZUxvYWQoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdmdXaWR0aDogMCwKICAgICAgcmVkcmF3VG9nZ2xlOiB0cnVlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g57uY5Yi25p+x5b2iCiAgICBBbmltYXRlTG9hZDogZnVuY3Rpb24gQW5pbWF0ZUxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBzZWxlY3RBbGwoInJlY3QiKS5kYXRhKHRoaXMuZGF0YSkudHJhbnNpdGlvbigpLmRlbGF5KGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgcmV0dXJuIGkgKiAxNTA7CiAgICAgIH0pLmR1cmF0aW9uKDEwMDApLmF0dHIoInkiLCBmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBfdGhpcy55U2NhbGUoZFtfdGhpcy55S2V5XSk7CiAgICAgIH0pLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnN2Z0hlaWdodCAtIF90aGlzLnlTY2FsZShkW190aGlzLnlLZXldKTsKICAgICAgfSkuZGF0YSh0aGlzLmRhdGEpLmVudGVyKCk7CiAgICB9LAogICAgLy8g6LCD5pW056qX5Y+j5aSn5bCP5ZCOMzAw5q+r56eS6YeN5paw57uY5Yi25Zu+6KGoCiAgICAvLyDljbPlk43lupTlvI/nu5jliLYKICAgIEFkZFJlc2l6ZUxpc3RlbmVyOiBmdW5jdGlvbiBBZGRSZXNpemVMaXN0ZW5lcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kZGF0YS5yZWRyYXdUb2dnbGUgPSBmYWxzZTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kZGF0YS5yZWRyYXdUb2dnbGUgPSB0cnVlOwogICAgICAgICAgX3RoaXMyLiRkYXRhLnN2Z1dpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRhaW5lciIpLm9mZnNldFdpZHRoICogMC43NTsKCiAgICAgICAgICBfdGhpczIuQW5pbWF0ZUxvYWQoKTsKICAgICAgICB9LCAzMDApOwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5zdmdXaWR0aCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZGF0YU1heDogZnVuY3Rpb24gZGF0YU1heCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gbWF4KHRoaXMuZGF0YSwgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZFtfdGhpczMueUtleV07CiAgICAgIH0pOwogICAgfSwKICAgIGRhdGFNaW46IGZ1bmN0aW9uIGRhdGFNaW4oKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIG1pbih0aGlzLmRhdGEsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGRbX3RoaXM0LnlLZXldOwogICAgICB9KTsKICAgIH0sCiAgICB4U2NhbGU6IGZ1bmN0aW9uIHhTY2FsZSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gc2NhbGVCYW5kKCkucmFuZ2VSb3VuZChbMCwgdGhpcy5zdmdXaWR0aF0pLnBhZGRpbmcoMC4xKS5kb21haW4odGhpcy5kYXRhLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkW190aGlzNS54S2V5XTsKICAgICAgfSkpOwogICAgfSwKICAgIC8vIOmAmui/h+e6v+aAp+avlOS+i+WwuuiHquWKqOeUn+aIkAogICAgeVNjYWxlOiBmdW5jdGlvbiB5U2NhbGUoKSB7CiAgICAgIHJldHVybiBzY2FsZUxpbmVhcigpLnJhbmdlUm91bmQoW3RoaXMuc3ZnSGVpZ2h0LCAwXSkuZG9tYWluKFt0aGlzLmRhdGFNaW4gPiAwID8gMCA6IHRoaXMuZGF0YU1pbiArIDIsIHRoaXMuZGF0YU1heCArIDJdKTsKICAgIH0sCiAgICBzdmdIZWlnaHQ6IGZ1bmN0aW9uIHN2Z0hlaWdodCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3ZnV2lkdGggLyAxLjYxODAzMzk4ODc1OyAvLyDpu4Tph5Hmr5TkvosKICAgIH0KICB9Cn07"},{"version":3,"sources":["BarChart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"container\" class=\"svg-container\" align=\"center\">\n    <h1>{{ title }}</h1>\n    <svg v-if=\"redrawToggle === true\" :width=\"svgWidth\" :height=\"svgHeight\">\n      <g>\n        <text\n          v-for=\"item in data\"\n          :key=\"item[xKey].amount\"\n          :x=\"xScale(item[xKey]) + 30\"\n          :y=\"yScale(item[yKey]) - 2\"\n          fill=\"red\"\n        >{{ item[xKey]}} {{ item[yKey]}}</text>\n\n        <rect\n          v-for=\"item in data\"\n          class=\"bar-positive\"\n          :key=\"item[xKey]\"\n          :x=\"xScale(item[xKey])\"\n          :y=\"yScale(0)\"\n          :width=\"xScale.bandwidth()\"\n          :height=\"0\"\n        />\n      </g>\n    </svg>\n  </div>\n</template>\n\n<script>\nimport { scaleLinear, scaleBand } from \"d3-scale\";\nimport { max, min } from \"d3-array\";\nimport { selectAll } from \"d3-selection\";\n// import { transition } from \"d3-transition\";\n\nexport default {\n  name: \"BarChart\",\n  props: {\n    title: String,\n    xKey: String,\n    yKey: String,\n    data: Array\n  },\n  mounted() {\n    this.svgWidth = document.getElementById(\"container\").offsetWidth * 0.75;\n    this.AddResizeListener();\n    this.AnimateLoad();\n  },\n  data: () => ({\n    svgWidth: 0,\n    redrawToggle: true\n  }),\n  methods: {\n    // 绘制柱形\n    AnimateLoad() {\n      selectAll(\"rect\")\n        .data(this.data)\n        .transition()\n        .delay((d, i) => {\n          return i * 150;\n        })\n        .duration(1000)\n        .attr(\"y\", d => {\n          return this.yScale(d[this.yKey]);\n        })\n        .attr(\"height\", d => {\n          return this.svgHeight - this.yScale(d[this.yKey]);\n        })\n        .data(this.data)\n        .enter();\n    },\n    // 调整窗口大小后300毫秒重新绘制图表\n    // 即响应式绘制\n    AddResizeListener() {\n      window.addEventListener(\"resize\", () => {\n        this.$data.redrawToggle = false;\n        setTimeout(() => {\n          this.$data.redrawToggle = true;\n          this.$data.svgWidth =\n            document.getElementById(\"container\").offsetWidth * 0.75;\n          this.AnimateLoad();\n        }, 300);\n      });\n      console.log(this.svgWidth);\n    }\n  },\n  computed: {\n    dataMax() {\n      return max(this.data, d => {\n        return d[this.yKey];\n      });\n    },\n    dataMin() {\n      return min(this.data, d => {\n        return d[this.yKey];\n      });\n    },\n    xScale() {\n      return scaleBand()\n        .rangeRound([0, this.svgWidth])\n        .padding(0.1)\n        .domain(\n          this.data.map(d => {\n            return d[this.xKey];\n          })\n        );\n    },\n    // 通过线性比例尺自动生成\n    yScale() {\n      return scaleLinear()\n        .rangeRound([this.svgHeight, 0])\n        .domain([this.dataMin > 0 ? 0 : this.dataMin + 2, this.dataMax + 2]);\n    },\n\n    svgHeight() {\n      return this.svgWidth / 1.61803398875; // 黄金比例\n    }\n  }\n};\n</script>\n\n<style scoped>\n.bar-positive {\n  fill: steelblue;\n  transition: r 0.2s ease-in-out;\n}\n\n.bar-positive:hover {\n  fill: brown;\n}\n\n.svg-container {\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  padding-bottom: 1%;\n  vertical-align: top;\n  overflow: hidden;\n}\n</style>\n"],"sourceRoot":"src/components"}]}