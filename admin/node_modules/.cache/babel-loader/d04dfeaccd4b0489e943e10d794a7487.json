{"remainingRequest":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js!/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eripha/Desktop/project/routine/admin/src/views/ItemEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eripha/Desktop/project/routine/admin/src/views/ItemEdit.vue","mtime":1593006952781},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICAvL+WcqHJvdXRlcueahGpz5paH5Lu25Lit5aOw5piO77yM6L+Z5Liq6aG16Z2i5Y+v5Lul6Lef6Lev55Sx5bC95Y+v6IO955qE6Kej6ICmCiAgICAvL+aOpeaUtmlk6L+Z5Liq5Y+C5pWwCiAgICBpZDoge30KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbDoge30sCiAgICAgIHBhcmVudHM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWZ0ZXJVcGxvYWQ6IGZ1bmN0aW9uIGFmdGVyVXBsb2FkKHJlcykgewogICAgICAvL+aYvuekuui1i+WAvO+8jOS4ieS4quWPguaVsO+8jOe7mXRoaXMubW9kZWzvvIzotYvkuIDkuKrlsZ7mgKcnaWNvbics5YC85Li6cmVzLnVybAogICAgICB0aGlzLiRzZXQodGhpcy5tb2RlbCwgJ2ljb24nLCByZXMudXJsKTsgLy8gdGhpcy5tb2RlbC5pY29uID0gcmVzLnVybAogICAgfSwKICAgIC8v5ZKM5ZCO56uv55qE5o6l5Y+j5LiA5qC377yM55SoIGFzeW5j5pa55byP77yM5oqK5byC5q2l5Zue6LCD55qE5pa55rOV5o2i5oiQ5ZCM5q2l77yM6KaB55So55qE6K+dYXN5bmPlkoxhd2FpdOaIkOWvueS9v+eUqAogICAgLy/mlrDlu7rlkoznvJbovpHnmoRzYXZl5pa55rOV6KaB5YGa5p2h5Lu25Yik5patCiAgICAvL+aWsOW7uu+8mnBvc3TmjqXlj6MgIO+8m+e8lui+ke+8mnB1dOaOpeWPowogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIHJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzYXZlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuJGh0dHAucHV0KCIvcmVzdC9pdGVtcy8iLmNvbmNhdCh0aGlzLmlkKSwgdGhpcy5tb2RlbCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLiRodHRwLnBvc3QoJy9yZXN0L2l0ZW1zJywgdGhpcy5tb2RlbCkpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgLy9lc2xpbnTmo4Dmn6XkuI3og73lo7DmmI7mnKrlvJXnlKjnmoTlj5jph4/vvIzmiYDku6XliqDkuIrov5nkuIDlj6UKICAgICAgICAgICAgICB0aGlzLm1vZGVsID0gcmVzLmRhdGE7IC8vIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnY2F0ZWdvcmllcycsdGhpcy5tb2RlbCkKICAgICAgICAgICAgICAvLyB0aGlzLiRodHRwLnBvc3QoJ2NhdGVnb3JpZXMnLCB0aGlzLm1vZGVsKQoKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2l0ZW1zL2xpc3QnKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv53lrZjmiJDlip8nCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0sCiAgICAvL+agueaNrmlk6I635Y+W5Yiw5b2T5YmN6K6w5b2V6K+m5oOF77yM5oqK5ZCN56ew5aGr5YWF5YiwaW5wdXTkuK3ljrsKICAgIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgICAgdmFyIHJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBmZXRjaCQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy4kaHR0cC5nZXQoIi9yZXN0L2l0ZW1zLyIuY29uY2F0KHRoaXMuaWQpKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgdGhpcy5tb2RlbCA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgLy/ojrflj5bkuIvmi4nliJfooajkuK3nmoTkuIrnuqfliIbnsbsKICAgIGZldGNoUGFyZW50czogZnVuY3Rpb24gZmV0Y2hQYXJlbnRzKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGZldGNoUGFyZW50cyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy4kaHR0cC5nZXQoIi9yZXN0L2l0ZW1zIikpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIHRoaXMucGFyZW50cyA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaFBhcmVudHMoKTsgLy/liY3pnaLov5nkuKrmnaHku7bmu6HotrPkuYvlkI7vvIh1cmzluKZpZOWPguaVsO+8jOWNs+W9k+WJjeWkhOS6jue8lui+kemhtemdou+8ie+8jOWGjeaJp+ihjOesrOS6jOS4quadoeS7tgoKICAgIHRoaXMuaWQgJiYgdGhpcy5mZXRjaCgpOwogIH0KfTs="},{"version":3,"sources":["ItemEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,eAAA;AACA,EAAA,KAAA,EAAA;AACA;AACA;AACA,IAAA,EAAA,EAAA;AAHA,GADA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,GADA,EACA;AACA;AACA,WAAA,IAAA,CAAA,KAAA,KAAA,EAAA,MAAA,EAAA,GAAA,CAAA,GAAA,EAFA,CAGA;AACA,KALA;AAMA;AACA;AACA;AACA,IAAA,IATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAWA,KAAA,EAXA;AAAA;AAAA;AAAA;;AAAA;AAAA,8CAYA,KAAA,KAAA,CAAA,GAAA,uBAAA,KAAA,EAAA,GAAA,KAAA,KAAA,CAZA;;AAAA;AAYA,cAAA,GAZA;AAAA;AAAA;;AAAA;AAAA;AAAA,8CAcA,KAAA,KAAA,CAAA,IAAA,CAAA,aAAA,EAAA,KAAA,KAAA,CAdA;;AAAA;AAcA,cAAA,GAdA;;AAAA;AAgBA;AACA,mBAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAjBA,CAmBA;AACA;;AACA,mBAAA,OAAA,CAAA,IAAA,CAAA,aAAA;AACA,mBAAA,QAAA,CAAA;AACA,gBAAA,IAAA,EAAA,SADA;AAEA,gBAAA,OAAA,EAAA;AAFA,eAAA;;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA;AACA,IAAA,KA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CA6BA,KAAA,KAAA,CAAA,GAAA,uBAAA,KAAA,EAAA,EA7BA;;AAAA;AA6BA,cAAA,GA7BA;AA8BA,mBAAA,KAAA,GAAA,GAAA,CAAA,IAAA;;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgCA;AACA,IAAA,YAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAkCA,KAAA,KAAA,CAAA,GAAA,eAlCA;;AAAA;AAkCA,cAAA,GAlCA;AAmCA,mBAAA,OAAA,GAAA,GAAA,CAAA,IAAA;;AAnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAZA;AAkDA,EAAA,OAlDA,qBAkDA;AACA,SAAA,YAAA,GADA,CAEA;;AACA,SAAA,EAAA,IAAA,KAAA,KAAA,EAAA;AACA;AAtDA,CAAA","sourcesContent":["\n<template>\n  <!-- 分类创建及编辑页 -->\n  <div>\n    <!-- 如果url带id参数，就显示编辑分类，不带就显示新建分类 -->\n    <h1>{{id ? '编辑':'新建'}}分类</h1>\n    <!-- 点击保存按钮提交需要触发submit的原生事件，prevent表示阻止提交，不要跳转页面，定义一个save方法，写在methods中。在这边添加 -->\n    <el-form @submit.native.prevent=\"save\">\n      <!-- <el-form-item label=\"上级分类\">\n        <el-select v-model=\"model.parent\">\n          \n          <el-option v-for=\"item in parents\" :key=\"item._id\"\n          :label=\"item.name\" :value=\"item._id\"></el-option>\n        </el-select>\n      </el-form-item>-->\n      <el-form-item label=\"名称\">\n        <el-input v-model=\"model.name\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"图标\">\n        <!-- :表示动态绑定\n          action表示上传的接口地址是什么 ，加上upload拼成上传地址,defaults表示默认参数\n          成功之后，在on-success中需要把返回来的图片的地址的值赋值给model.icon -->\n        <el-upload\n          class=\"avatar-uploader\"\n          :headers=\"getAuthHeaders()\"\n          :action=\"$http.defaults.baseURL + '/upload'\"\n          :show-file-list=\"false\"\n          :on-success=\"afterUpload\"\n        >\n        <!-- 如果有图片地址显示图片 -->\n          <img v-if=\"model.icon\" :src=\"model.icon\" class=\"avatar\" />\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    //在router的js文件中声明，这个页面可以跟路由尽可能的解耦\n    //接收id这个参数\n    id: {}\n  },\n  data () {\n    return {\n      model: {},\n      parents: [],\n    }\n  },\n  methods: {\n    afterUpload(res){\n      //显示赋值，三个参数，给this.model，赋一个属性'icon',值为res.url\n      this.$set(this.model,'icon',res.url)\n      // this.model.icon = res.url\n    },\n    //和后端的接口一样，用 async方式，把异步回调的方法换成同步，要用的话async和await成对使用\n    //新建和编辑的save方法要做条件判断\n    //新建：post接口  ；编辑：put接口\n    async save () {\n      let res\n      if (this.id) {\n        res = await this.$http.put(`/rest/items/${this.id}`, this.model)\n      } else {\n        res = await this.$http.post('/rest/items', this.model)\n      }\n      //eslint检查不能声明未引用的变量，所以加上这一句\n      this.model = res.data\n\n      // const res = await this.$http.post('categories',this.model)\n      // this.$http.post('categories', this.model)\n      this.$router.push('/items/list')\n      this.$message({\n        type: 'success',\n        message: '保存成功'\n      })\n    },\n    //根据id获取到当前记录详情，把名称填充到input中去\n    async fetch () {\n      const res = await this.$http.get(`/rest/items/${this.id}`)\n      this.model = res.data\n    },\n    //获取下拉列表中的上级分类\n    async fetchParents () {\n      const res = await this.$http.get(`/rest/items`)\n      this.parents = res.data\n    }\n  },\n  created () {\n    this.fetchParents()\n    //前面这个条件满足之后（url带id参数，即当前处于编辑页面），再执行第二个条件\n    this.id && this.fetch()\n  },\n}\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/views"}]}