{"remainingRequest":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js!/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eripha/Desktop/project/routine/admin/src/views/CategoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eripha/Desktop/project/routine/admin/src/views/CategoryEdit.vue","mtime":1593354990543},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICAvL+WcqHJvdXRlcueahGpz5paH5Lu25Lit5aOw5piO77yM6L+Z5Liq6aG16Z2i5Y+v5Lul6Lef6Lev55Sx5bC95Y+v6IO955qE6Kej6ICmCiAgICAvL+aOpeaUtmlk6L+Z5Liq5Y+C5pWwCiAgICBpZDoge30KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbDoge30sCiAgICAgIHBhcmVudHM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/lkozlkI7nq6/nmoTmjqXlj6PkuIDmoLfvvIznlKggYXN5bmPmlrnlvI/vvIzmiorlvILmraXlm57osIPnmoTmlrnms5XmjaLmiJDlkIzmraXvvIzopoHnlKjnmoTor51hc3luY+WSjGF3YWl05oiQ5a+55L2/55SoCiAgICAvL+aWsOW7uuWSjOe8lui+keeahHNhdmXmlrnms5XopoHlgZrmnaHku7bliKTmlq0KICAgIC8v5paw5bu677yacG9zdOaOpeWPoyAg77yb57yW6L6R77yacHV05o6l5Y+jCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHNhdmUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5pZCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dC5zZW50KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSB0aGlzLiRodHRwLnB1dCgiL3Jlc3QvY2F0ZWdvcmllcy8iLmNvbmNhdCh0aGlzLmlkKSwgdGhpcy5tb2RlbCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSB0aGlzLiRodHRwLnBvc3QoIi9yZXN0L2NhdGVnb3JpZXMiLCB0aGlzLm1vZGVsKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC50MDsKICAgICAgICAgICAgICAvL2VzbGludOajgOafpeS4jeiDveWjsOaYjuacquW8leeUqOeahOWPmOmHj++8jOaJgOS7peWKoOS4iui/meS4gOWPpQogICAgICAgICAgICAgIHRoaXMubW9kZWwgPSByZXMuZGF0YTsgLy8gY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCdjYXRlZ29yaWVzJyx0aGlzLm1vZGVsKQogICAgICAgICAgICAgIC8vIHRoaXMuJGh0dHAucG9zdCgnY2F0ZWdvcmllcycsIHRoaXMubW9kZWwpCgogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvY2F0ZWdvcmllcy9saXN0Iik7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+d5a2Y5oiQ5YqfIgogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgLy/moLnmja5pZOiOt+WPluWIsOW9k+WJjeiusOW9leivpuaDhe+8jOaKiuWQjeensOWhq+WFheWIsGlucHV05Lit5Y67CiAgICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICAgIHZhciByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZmV0Y2gkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuJGh0dHAuZ2V0KCIvcmVzdC9jYXRlZ29yaWVzLyIuY29uY2F0KHRoaXMuaWQpKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgdGhpcy5tb2RlbCA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgLy/ojrflj5bkuIvmi4nliJfooajkuK3nmoTkuIrnuqfliIbnsbsKICAgIGZldGNoUGFyZW50czogZnVuY3Rpb24gZmV0Y2hQYXJlbnRzKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGZldGNoUGFyZW50cyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy4kaHR0cC5nZXQoIi9yZXN0L2NhdGVnb3JpZXMiKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgdGhpcy5wYXJlbnRzID0gcmVzLmRhdGE7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoUGFyZW50cygpOyAvL+WJjemdoui/meS4quadoeS7tua7oei2s+S5i+WQju+8iHVybOW4pmlk5Y+C5pWw77yM5Y2z5b2T5YmN5aSE5LqO57yW6L6R6aG16Z2i77yJ77yM5YaN5omn6KGM56ys5LqM5Liq5p2h5Lu2CgogICAgdGhpcy5pZCAmJiB0aGlzLmZldGNoKCk7CiAgfQp9Ow=="},{"version":3,"sources":["CategoryEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,eAAA;AACA,EAAA,KAAA,EAAA;AACA;AACA;AACA,IAAA,EAAA,EAAA;AAHA,GADA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA;AACA;AACA;AACA,IAAA,IAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAYA,KAAA,EAZA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,4BAYA,KAAA,KAAA,CAAA,GAAA,4BAAA,KAAA,EAAA,GAAA,KAAA,KAAA,CAZA;AAAA;AAAA;;AAAA;AAAA,4BAYA,KAAA,KAAA,CAAA,IAAA,CAAA,kBAAA,EAAA,KAAA,KAAA,CAZA;;AAAA;AAYA,cAAA,GAZA;AAaA;AACA,mBAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAdA,CAgBA;AACA;;AACA,mBAAA,OAAA,CAAA,IAAA,CAAA,kBAAA;AACA,mBAAA,QAAA,CAAA;AACA,gBAAA,IAAA,EAAA,SADA;AAEA,gBAAA,OAAA,EAAA;AAFA,eAAA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA;AACA,IAAA,KAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CA0BA,KAAA,KAAA,CAAA,GAAA,4BAAA,KAAA,EAAA,EA1BA;;AAAA;AA0BA,cAAA,GA1BA;AA2BA,mBAAA,KAAA,GAAA,GAAA,CAAA,IAAA;;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6BA;AACA,IAAA,YA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CA+BA,KAAA,KAAA,CAAA,GAAA,oBA/BA;;AAAA;AA+BA,cAAA,GA/BA;AAgCA,mBAAA,OAAA,GAAA,GAAA,CAAA,IAAA;;AAhCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAZA;AA+CA,EAAA,OA/CA,qBA+CA;AACA,SAAA,YAAA,GADA,CAEA;;AACA,SAAA,EAAA,IAAA,KAAA,KAAA,EAAA;AACA;AAnDA,CAAA","sourcesContent":["\n<template>\n  <!-- 分类创建及编辑页 -->\n  <el-card class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <!-- 如果url带id参数，就显示编辑分类，不带就显示新建分类 -->\n      <h1>{{id ? '编辑':'新建'}}分类</h1>\n    </div>\n    <div class=\"text item\">\n      <!-- 点击保存按钮提交需要触发submit的原生事件，prevent表示阻止提交，不要跳转页面，定义一个save方法，写在methods中。在这边添加 -->\n      <el-form label-width=\"80px\" label-position=\"left\" @submit.native.prevent=\"save\">\n        <el-form-item label=\"上级分类\">\n          <el-select v-model=\"model.parent\">\n            <!-- lable决定选项显示什么内容，value决定点击它时真正存的是什么内容 -->\n            <el-option v-for=\"item in parents\" :key=\"item._id\" :label=\"item.name\" :value=\"item._id\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"标题\">\n          <el-input v-model=\"model.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路径\">\n          <el-input v-model=\"model.path\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </el-card>\n</template>\n\n<script>\nexport default {\n  props: {\n    //在router的js文件中声明，这个页面可以跟路由尽可能的解耦\n    //接收id这个参数\n    id: {}\n  },\n  data() {\n    return {\n      model: {},\n      parents: []\n    };\n  },\n  methods: {\n    //和后端的接口一样，用 async方式，把异步回调的方法换成同步，要用的话async和await成对使用\n    //新建和编辑的save方法要做条件判断\n    //新建：post接口  ；编辑：put接口\n    async save() {\n      // let res;\n      // if (this.id) {\n      //   res = await this.$http.put(`/rest/categories/${this.id}`, this.model);\n      // } else {\n      //   res = await this.$http.post(\"/rest/categories\", this.model);\n      // }\n\n      let res = await this.id ? this.$http.put(`/rest/categories/${this.id}`, this.model) : this.$http.post(\"/rest/categories\", this.model)\n      //eslint检查不能声明未引用的变量，所以加上这一句\n      this.model = res.data;\n\n      // const res = await this.$http.post('categories',this.model)\n      // this.$http.post('categories', this.model)\n      this.$router.push(\"/categories/list\");\n      this.$message({\n        type: \"success\",\n        message: \"保存成功\"\n      });\n    },\n    //根据id获取到当前记录详情，把名称填充到input中去\n    async fetch() {\n      const res = await this.$http.get(`/rest/categories/${this.id}`);\n      this.model = res.data;\n    },\n    //获取下拉列表中的上级分类\n    async fetchParents() {\n      const res = await this.$http.get(`/rest/categories`);\n      this.parents = res.data;\n    }\n  },\n  created() {\n    this.fetchParents();\n    //前面这个条件满足之后（url带id参数，即当前处于编辑页面），再执行第二个条件\n    this.id && this.fetch();\n  }\n};\n</script>\n\n<style scoped>\nh1 {\n  line-height: normal;\n}\n/* .el-input{\n  width: 50vw;\n} */\n.text {\n  font-size: 14px;\n}\n\n.item {\n  margin-bottom: 18px;\n}\n\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: \"\";\n}\n.clearfix:after {\n  clear: both;\n}\n\n.box-card {\n  width: 480px;\n  margin: 0 auto;\n}\n</style>"],"sourceRoot":"src/views"}]}