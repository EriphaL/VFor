{"remainingRequest":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eripha/Desktop/project/routine/admin/src/views/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eripha/Desktop/project/routine/admin/src/views/Main.vue","mtime":1593322930438},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBmZXRjaCgpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoIi9yZXN0L2NhdGVnb3JpZXMiKTsKICAgICAgLy90b2RvCiAgICAgIGxldCBtYWluTWVudSA9IFtdOwogICAgICBsZXQgc3ViTWVudSA9IFtdOwogICAgICBsZXQgY29weVJlcyA9IFsuLi5yZXMuZGF0YV07CiAgICAgIGNvcHlSZXMubWFwKGVsZW1lbnQgPT4gewogICAgICAgICFlbGVtZW50LnBhcmVudCA/IG1haW5NZW51LnB1c2goZWxlbWVudCkgOiBzdWJNZW51LnB1c2goZWxlbWVudCk7CiAgICAgIH0pOwogICAgICBmb3IgKGxldCBlbCBvZiBzdWJNZW51KSB7CiAgICAgICAgLy8gMSDlnKjkuIDnuqfoj5zljZXpgY3ljoblr7vmib5pZOWSjHN1Yk1lbnXkuK3lvZPliY1lbC5wYXJlbnQuX2lk55u4562J55qECiAgICAgICAgY29uc3QgZmluZEluZGV4ID0gbWFpbk1lbnUuZmluZEluZGV4KAogICAgICAgICAgaXRlbSA9PiBpdGVtWyJfaWQiXSA9PT0gZWwucGFyZW50Ll9pZAogICAgICAgICk7CiAgICAgICAgLy8gMiDog73mib7liLDvvIznu5ltYWluTWVudeW9k+WJjeS4i+agh+WinuWKoGNoaWxkcmVu5a2X5q61CiAgICAgICAgbWFpbk1lbnVbZmluZEluZGV4XVsiY2hpbGRyZW4iXSA9IFtdOwogICAgICAgIC8vIDMg5Yig6Zmkc3ViTWVudeS4reW9k+WJjWVs55qEcGFyZW505a2X5q61CiAgICAgICAgZGVsZXRlIGVsLnBhcmVudDsKICAgICAgICAvLyAgIGxldCBjdXIgPSBlbAogICAgICAgIC8vICAgY29uc29sZS5sb2coZWwpOwogICAgICAgIC8vIDQg5oqK5aSE55CG5aW955qEZWxwdXNo5YiwY2hpZHJlbuS4rQogICAgICAgIGxldCBhZGRTdWIgPSBtYWluTWVudVtmaW5kSW5kZXhdWyJjaGlsZHJlbiJdOwogICAgICAgIGFkZFN1Yi5wdXNoKGVsKTsKICAgICAgICAvLyDpl67popgg5LiJ57qn6I+c5Y2V77yfCiAgICAgICAgLy8gY29uc29sZS5sb2coZWwpOwogICAgICB9CiAgICAgIHRoaXMubGlzdCA9IG1haW5NZW51OwogICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwogICAgfSwKICAgIC8vIHRvZG9saXN0CiAgICBzaG93U3ViKCkge30sCiAgICBzZW5kVG9CcmVhZCgpIHsKICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLml0ZW0ubmFtZTsKICAgICAgY29uc29sZS5sb2codGl0bGUpOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2goKTsKICB9Cn07Cg=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <el-container>\n    <el-header class=\"mHead\">\n      <div class=\"mLogo\">\n        <img src=\"../assets/logo.png\" alt />\n      </div>\n      <div style=\"flex:auto\"></div>\n      <el-dropdown>\n        <i class=\"el-icon-setting\" style=\"margin-right: 15px;font-size:1.5rem\"></i>\n        <el-dropdown-menu slot=\"dropdown\">\n          <el-dropdown-item>查看</el-dropdown-item>\n          <el-dropdown-item>新增</el-dropdown-item>\n          <el-dropdown-item>删除</el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n      <i class=\"el-icon-user\" style=\"font-size:2rem\"></i>\n    </el-header>\n    <el-container>\n      <!-- 导航改成vw 查询viewport 移动端隐藏 :default-openeds=\"['1']\" -->\n      <el-aside width=\"200px\">\n        <el-menu router unique-opened :default-active=\"$route.path\">\n          <el-submenu index=\"1\">\n            <template slot=\"title\">\n              <i class=\"el-icon-edit\"></i>系统设置\n            </template>\n            <el-menu-item-group>\n              <template slot=\"title\">分类</template>\n              <el-menu-item index=\"/categories/create\">新建分类</el-menu-item>\n              <el-menu-item index=\"/categories/list\">分类列表</el-menu-item>\n            </el-menu-item-group>\n          </el-submenu>\n        </el-menu>\n\n        <!-- todolist -->\n        <el-menu router :default-openeds=\"['1']\" :default-active=\"$route.path\">\n          <el-submenu index=\"1\">\n            <template slot=\"title\">\n              <i class=\"el-icon-star-off\"></i>路线\n            </template>\n            <!-- <el-menu-item v-for=\"item in list\" :key=\"item._id\" :index=\"item.path\">\n              <template slot=\"title\" v-if=\"item.path=='/'\">{{item.name}}</template>\n              <el-menu-item v-else @click=\"sendToBread\">{{item.name}}</el-menu-item>\n            </el-menu-item>-->\n            <my-menu-item :label=\"list.name\" :nodes=\"list.children\" :path=\"list.path\"></my-menu-item>\n          </el-submenu>\n        </el-menu>\n      </el-aside>\n      <el-container>\n        <el-main>\n          <my-bread-crumb class=\"mBreadCrumb\" :breadName=\"$route.path\"></my-bread-crumb>\n          <router-view :key=\"$route.path\"></router-view>\n        </el-main>\n        <!-- <el-footer>Footer</el-footer> -->\n      </el-container>\n    </el-container>\n  </el-container>\n</template>\n\n\n\n\n\n<script>\nexport default {\n  data() {\n    return {\n      list: []\n    };\n  },\n  methods: {\n    async fetch() {\n      const res = await this.$http.get(\"/rest/categories\");\n      //todo\n      let mainMenu = [];\n      let subMenu = [];\n      let copyRes = [...res.data];\n      copyRes.map(element => {\n        !element.parent ? mainMenu.push(element) : subMenu.push(element);\n      });\n      for (let el of subMenu) {\n        // 1 在一级菜单遍历寻找id和subMenu中当前el.parent._id相等的\n        const findIndex = mainMenu.findIndex(\n          item => item[\"_id\"] === el.parent._id\n        );\n        // 2 能找到，给mainMenu当前下标增加children字段\n        mainMenu[findIndex][\"children\"] = [];\n        // 3 删除subMenu中当前el的parent字段\n        delete el.parent;\n        //   let cur = el\n        //   console.log(el);\n        // 4 把处理好的elpush到chidren中\n        let addSub = mainMenu[findIndex][\"children\"];\n        addSub.push(el);\n        // 问题 三级菜单？\n        // console.log(el);\n      }\n      this.list = mainMenu;\n      console.log(this.list);\n    },\n    // todolist\n    showSub() {},\n    sendToBread() {\n      const title = this.item.name;\n      console.log(title);\n    }\n  },\n  created() {\n    this.fetch();\n  }\n};\n</script>\n\n<style >\n.el-container {\n  height: 92vh;\n}\n.el-header,\n.el-footer {\n  background-color: #b3c0d1;\n  color: #333;\n  text-align: center;\n  /* line-height: 60px; */\n}\n\n.el-aside {\n  height: fit-content;\n  background-color: #d3dce6;\n  color: #333;\n  /* text-align: center; */\n  line-height: 200px;\n}\n\n.el-main {\n  background-color: #e9eef3;\n  color: #333;\n  /* text-align: center; */\n  line-height: normal;\n  /* text-align: center; */\n}\n\nbody > .el-container {\n  margin-bottom: 40px;\n}\n\n.el-container:nth-child(5) .el-aside,\n.el-container:nth-child(6) .el-aside {\n  line-height: 260px;\n}\n\n.el-container:nth-child(7) .el-aside {\n  line-height: 320px;\n}\n\n.mHead {\n  display: flex;\n  align-items: center;\n}\nimg {\n  height: 2.5rem;\n}\n\n.mNav {\n  display: flex;\n}\n.mBreadCrumb {\n  flex: auto;\n  padding-bottom: 20px;\n}\n</style>"]}]}