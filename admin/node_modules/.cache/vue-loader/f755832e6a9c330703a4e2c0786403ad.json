{"remainingRequest":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eripha/Desktop/project/routine/admin/src/views/AdList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eripha/Desktop/project/routine/admin/src/views/AdList.vue","mtime":1593006952780},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1zOiBbXQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy/ph43mlrDosIPnlKgKICAgIGFzeW5jIGZldGNoICgpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9yZXN0L2FkcycpCiAgICAgIHRoaXMuaXRlbXMgPSByZXMuZGF0YQogICAgfSwKICAgIGFzeW5jIHJlbW92ZShyb3cpewogICAgICB0aGlzLiRjb25maXJtKGDmmK/lkKbopoHliKDpmaTliIbnsbske3Jvdy5uYW1lfWAsICfmj5DnpLonLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgLy/ms6jmhI/ov5novrnmmK9yb3dfaWQKICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZGVsZXRlKGAvcmVzdC9hZHMvJHtyb3cuX2lkfWApCiAgICAgICAgICB0aGlzLml0ZW1zID0gcmVzLmRhdGEKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmZldGNoKCkKICAgICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5mZXRjaCgpCiAgfSwKfQo="},{"version":3,"sources":["AdList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <h1>广告位列表</h1>\n    <el-table :data=\"items\">\n      <el-table-column prop=\"_id\" label=\"ID\" width=\"230\"></el-table-column>\n      <!-- 后端接口添加了populate方法，把parent变成了一个对象，以此来获取它的name。否则prop=parent只能拿到它的id -->\n      <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <!-- scope表示当前行 -->\n          <el-button @click=\"$router.push(`/ads/edit/${scope.row._id}`)\" type=\"text\" size=\"small\">编辑</el-button>\n          <el-button @click=\"remove(scope.row)\" type=\"text\" size=\"small\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      items: []\n    }\n  },\n  methods: {\n    //重新调用\n    async fetch () {\n      const res = await this.$http.get('/rest/ads')\n      this.items = res.data\n    },\n    async remove(row){\n      this.$confirm(`是否要删除分类${row.name}`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(async () => {\n          //注意这边是row_id\n          const res = await this.$http.delete(`/rest/ads/${row._id}`)\n          this.items = res.data\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n          this.fetch()\n        });\n    }\n  },\n  created () {\n    this.fetch()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>"]}]}