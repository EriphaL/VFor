{"remainingRequest":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eripha/Desktop/project/routine/admin/src/views/AdminUserList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eripha/Desktop/project/routine/admin/src/views/AdminUserList.vue","mtime":1593006952780},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eripha/Desktop/project/routine/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1zOiBbXQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy/ph43mlrDosIPnlKgKICAgIGFzeW5jIGZldGNoICgpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9yZXN0L2FkbWluX3VzZXJzJykKICAgICAgdGhpcy5pdGVtcyA9IHJlcy5kYXRhCiAgICB9LAogICAgYXN5bmMgcmVtb3ZlIChyb3cpIHsKICAgICAgdGhpcy4kY29uZmlybShg5piv5ZCm6KaB5Yig6Zmk566h55CG5ZGY77yaJHtyb3cudXNlcm5hbWV9YCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIC8v5rOo5oSP6L+Z6L655pivcm93X2lkCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5kZWxldGUoYC9yZXN0L2FkbWluX3VzZXJzLyR7cm93Ll9pZH1gKQogICAgICAgIHRoaXMuaXRlbXMgPSByZXMuZGF0YQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5mZXRjaCgpCiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmZldGNoKCkKICB9LAp9Cg=="},{"version":3,"sources":["AdminUserList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminUserList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <h1>管理员列表</h1>\n    <el-table :data=\"items\">\n      <el-table-column prop=\"_id\" label=\"ID\" width=\"230\"></el-table-column>\n      <!-- 后端接口添加了populate方法，把parent变成了一个对象，以此来获取它的name。否则prop=parent只能拿到它的id -->\n\n      <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <!-- scope表示当前行 -->\n          <el-button\n            @click=\"$router.push(`/admin_users/edit/${scope.row._id}`)\"\n            type=\"text\"\n            size=\"small\"\n          >编辑</el-button>\n          <el-button @click=\"remove(scope.row)\" type=\"text\" size=\"small\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      items: []\n    }\n  },\n  methods: {\n    //重新调用\n    async fetch () {\n      const res = await this.$http.get('/rest/admin_users')\n      this.items = res.data\n    },\n    async remove (row) {\n      this.$confirm(`是否要删除管理员：${row.username}`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        //注意这边是row_id\n        const res = await this.$http.delete(`/rest/admin_users/${row._id}`)\n        this.items = res.data\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n        this.fetch()\n      });\n    }\n  },\n  created () {\n    this.fetch()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>"]}]}